(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(4),c=a.n(s),i=(a(10),a(2)),o=a(5),l=a.n(o),u=(a(11),a(0)),d=function(e){var t=e.audioRef,a=e.progressRef,r=e.song,n=e.nextSong,s=e.prevSong,c=e.handlePlayPause,i=e.isPaused,o=e.startSetProgressBar,l=e.stopSetProgressBar,d=e.setProgressBar,j=e.progress,f=e.addRemoveFromFavourites,m=r.preview,p=r.album,b=r.title,h=r.artist,g=r.id,v=Object(u.jsx)("i",{className:"fa fa-step-backward","aria-hidden":"true"}),O=Object(u.jsx)("i",{className:"fa fa-step-forward","aria-hidden":"true"}),x=Object(u.jsx)("i",{className:"fa fa-pause","aria-hidden":"true"}),_=Object(u.jsx)("i",{className:"fa fa-play","aria-hidden":"true"}),N=Object(u.jsx)("i",{className:"fa fa-heart-o","aria-hidden":"true"}),y=Object(u.jsx)("i",{className:"fa fa-heart","aria-hidden":"true"}),S=null===t.current?"":Math.floor(t.current.currentTime),w=null===t.current?"":Math.floor(t.current.duration),P=w%60||"0",k=S%60||"0",F=Math.floor(S/60)||"0",I=Math.floor(w/60)||"0",R=(JSON.parse(localStorage.getItem("favourites"))||[]).map((function(e){return e.id})).includes(r.id);return Object(u.jsxs)("section",{className:"song-player",children:[Object(u.jsx)("img",{className:"song-player__image",src:p.cover_big,alt:"".concat(b," cover")}),Object(u.jsxs)("div",{className:"info-wrapper",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:b.length>25?"song-player__title--if-length":"song-player__title",children:Object(u.jsx)("span",{className:b.length>25?"song-player__title--if-length--animation":"",children:b})}),Object(u.jsx)("p",{className:"song-player__artist",children:h.name})]}),Object(u.jsx)("button",{className:"song-player__heart",onClick:f,children:R?y:N})]}),Object(u.jsx)("audio",{ref:t,autoPlay:!0,children:Object(u.jsx)("source",{src:m})},g),Object(u.jsx)("div",{className:"progress-bar",children:Object(u.jsx)("div",{ref:a,onClick:d,onMouseDown:o,onMouseMove:d,onMouseLeave:l,onMouseUp:l,className:"progress-bar__container",children:Object(u.jsx)("div",{style:{width:100*j+"%"}})})}),Object(u.jsxs)("div",{className:"timers-wrapper",children:[Object(u.jsxs)("span",{className:"timers timers--current-time",children:[F,":",k<10?"0".concat(k):k]}),Object(u.jsxs)("span",{className:"timers timers--duration",children:[I,":",P<10?"0".concat(P):P]})]}),Object(u.jsx)("div",{className:"song-player__controls",children:Object(u.jsxs)("div",{className:"button-wrapper",children:[Object(u.jsx)("button",{className:"song-player__button",onClick:function(){return s(r)},children:v}),Object(u.jsx)("button",{className:"song-player__button song-player__button--play",onClick:c,children:i?_:x}),Object(u.jsx)("button",{className:"song-player__button",onClick:function(){return n(r)},children:O})]})})]})},j=(a(13),function(e){var t=e.song,a=e.isCurrent,r=e.onSelect,n=e.setIsPaused,s=e.audioRef,c=e.addRemoveFavouritesFromList,i=e.currentPlaylist,o={color:a?"#009FFD":"#EAF6FF"},l=t.album,d=t.title,j=t.artist,f="all"===i,m=Object(u.jsx)("i",{className:"fa fa-trash-o","aria-hidden":"true"}),p=Object(u.jsx)("i",{className:"fa fa-heart-o","aria-hidden":"true"}),b=Object(u.jsx)("i",{className:"fa fa-heart","aria-hidden":"true"}),h=(JSON.parse(localStorage.getItem("favourites"))||[]).map((function(e){return e.id})).includes(t.id);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("li",{className:"song-list-item",children:[Object(u.jsxs)("div",{onClick:function(){s.current.play(),n(!1),r(t)},children:[Object(u.jsx)("img",{className:"song-list-item__image",src:l.cover_medium,alt:"".concat(d," cover")}),Object(u.jsxs)("div",{className:"title-artist-wrapper",children:[Object(u.jsx)("p",{className:"song-list-item__title",style:o,children:d}),Object(u.jsx)("p",{className:"song-list-item__artist",children:j.name})]})]}),Object(u.jsx)("button",{className:"song-list-item__icon",onClick:function(){return c(t)},children:f?h?b:p:m})]})})}),f=(a(14),function(e){var t=e.songs,a=e.currentSong,r=e.handleSelectSong,n=e.audioRef,s=e.setIsPaused,c=e.addRemoveFavouritesFromList,i=e.favourites,o=e.currentPlaylist;return Object(u.jsxs)("section",{className:"songs",children:[Object(u.jsx)("h2",{className:"songs__heading",children:"all"===o?"All songs":"Favourites"}),Object(u.jsx)("ul",{className:"songs__list",children:0===t.length?"dodaj co\u015b":t.map((function(e){return Object(u.jsx)(j,{song:e,isCurrent:e.preview===a.preview,onSelect:r,setIsPaused:s,audioRef:n,addRemoveFavouritesFromList:c,favourites:i,currentPlaylist:o},e.id)}))})]})}),m=(a(15),function(e){var t=e.handlePlayPause,a=e.isPaused,r=e.progressRef,n=e.progress,s=e.song,c=e.className,i=e.addRemoveFromFavourites,o=e.playFavourites,l=e.playAll,d=e.currentPlaylist,j=e.data,f=e.favourites,m=e.popOut,p=s.album,b=s.title,h=s.artist,g=Object(u.jsx)("i",{className:"fa fa-pause","aria-hidden":"true"}),v=Object(u.jsx)("i",{className:"fa fa-play","aria-hidden":"true"}),O=Object(u.jsx)("i",{className:"fa fa-heart-o","aria-hidden":"true"}),x=Object(u.jsx)("i",{className:"fa fa-heart","aria-hidden":"true"}),_="favourites"===d,N="all"===d,y=_?"playlists__chosen":"playlists__no-chosen",S=N?"playlists__chosen":"playlists__no-chosen",w=(JSON.parse(localStorage.getItem("favourites"))||[]).map((function(e){return e.id})).includes(s.id);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"fixed-player ".concat(c),children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{ref:r,className:"fixed-player__progress-container",children:Object(u.jsx)("div",{style:{width:100*n+"%"}})}),Object(u.jsx)("img",{onClick:function(){return window.scrollTo(0,0)},className:"fixed-player__image",src:p.cover_medium,alt:"".concat(b," cover")}),Object(u.jsxs)("div",{onClick:function(){return window.scrollTo(0,0)},className:"fixed-player__info",children:[Object(u.jsx)("h3",{className:"fixed-player__title",children:b}),Object(u.jsx)("p",{className:"fixed-player__artist",children:h.name})]})]}),Object(u.jsx)("button",{className:"fixed-player__heart",onClick:i,children:w?x:O}),Object(u.jsx)("button",{className:"fixed-player__button",onClick:t,children:a?v:g}),Object(u.jsxs)("div",{className:"playlists",children:[Object(u.jsxs)("button",{className:S,onClick:l,children:["All songs ","(".concat(j.length,")"),Object(u.jsx)("span",{children:N?"":v})]}),Object(u.jsxs)("button",{className:y,onClick:o,children:["Favourites ","(".concat(null===f?"0":f.length,")"),Object(u.jsx)("span",{children:_?"":v})]})]})]}),m?Object(u.jsx)("div",{className:"pop-out",children:"Favourites is empty"}):""]})}),p=(a(16),function(){return Object(u.jsx)("div",{className:"dot",children:Object(u.jsx)("div",{className:"dot__spin"})})});a(17);var b=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),a=Object(r.useRef)(null);window.onload=function(){null!==e.current&&(e.current.autoplay=!1)},window.onbeforeunload=function(){window.scrollTo(0,0)};var n=Object(r.useState)(!1),s=Object(i.a)(n,2),c=s[0],o=s[1],j=Object(r.useState)([]),b=Object(i.a)(j,2),h=b[0],g=b[1],v=Object(r.useState)("all"),O=Object(i.a)(v,2),x=O[0],_=O[1],N=Object(r.useState)([]),y=Object(i.a)(N,2),S=y[0],w=y[1],P=Object(r.useState)(0),k=Object(i.a)(P,2),F=k[0],I=k[1],R=S[F],C=Object(r.useState)(!0),J=Object(i.a)(C,2),T=J[0],M=J[1],A=Object(r.useState)(0),L=Object(i.a)(A,2),E=L[0],W=L[1],B=Object(r.useState)(0),U=Object(i.a)(B,2),D=U[0],z=U[1],X=Object(r.useState)(!1),$=Object(i.a)(X,2),q=$[0],G=$[1],H=Object(r.useState)(!1),K=Object(i.a)(H,2),Q=K[0],V=K[1],Y=Object(r.useState)(!1),Z=Object(i.a)(Y,2),ee=Z[0],te=Z[1],ae=Object(r.useState)(!1),re=Object(i.a)(ae,2),ne=re[0],se=re[1],ce=Object(r.useState)([]),ie=Object(i.a)(ce,2),oe=ie[0],le=ie[1];function ue(e,t){return t.findIndex((function(t){return t.preview===e.preview}))}function de(e){return(JSON.parse(localStorage.getItem("favourites"))||[]).map((function(e){return e.id})).includes(e.id)}function je(e){var t=JSON.parse(localStorage.getItem("favourites"))||[];t.push({id:e.id,title:e.title,preview:e.preview,album:{cover_medium:e.album.cover_medium,cover_big:e.album.cover_big},artist:{name:e.artist.name}}),localStorage.setItem("favourites",JSON.stringify(t));var a=localStorage.getItem("favourites");le(JSON.parse(a))}function fe(t){var a=(JSON.parse(localStorage.getItem("favourites"))||[]).filter((function(e){return e.id!==t.id}));localStorage.setItem("favourites",JSON.stringify(a));var r=localStorage.getItem("favourites");le(JSON.parse(r)),"favourites"===x&&(w(JSON.parse(r)),F>0&&I(F-1),e.current.play())}Object(r.useEffect)((function(){l()("https://api.deezer.com/playlist/8823756962/tracks?output=jsonp").then((function(e){e.ok&&e.json().then((function(e){g(e.data),w(e.data)}))}));var e=localStorage.getItem("favourites");le(JSON.parse(e)),null===e&&localStorage.setItem("favourites",JSON.stringify([]))}),[]),Object(r.useEffect)((function(){var t=setInterval((function(){null!==e.current&&(T&&clearInterval(t),e.current.ended&&(e.current.currentTime=0,pe(R),W(0),e.current.play(),clearInterval(t)),ee!==e.current&&(te(e.current),e.current.addEventListener("timeupdate",(function(t){if(!Q&&null!==e.current){var a=e.current,r=a.currentTime,n=a.duration;W(r/n),z(r/n)}}))))}),100);return function(){return clearInterval(t)}})),window.addEventListener("scroll",(function(e){var t=e.target.scrollingElement.scrollTop;t<100?se(!1):t<700&&se(!0)})),null!==oe&&void 0===R&&0===oe.length&&h.length>1&&(w(h),_("all"),W(0),z(0),null!==e.current&&(M(!0),e.current.currentTime=0,e.current.pause())),Q&&(V(!1),e.current.currentTime=e.current.duration*E),T&&null!==e.current&&e.current.pause();var me=function(e){if(null!==t&&q){var a=t.current,r=a.offsetLeft,n=a.offsetWidth,s=(e.clientX-r)/n;W(s),V(!0)}},pe=function(){var t=F>=S.length-1?F-S.length+1:F+1;I(t),M(!1),e.current.currentTime=0,W(0)},be=function(){T?(M(!1),e.current.play()):T||(M(!0),e.current.pause())},he=function(){de(R)?fe(R):je(R)};return Object(u.jsx)("div",{className:"App",children:0===S.length&&"all"===x?Object(u.jsx)(p,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"App__heading",children:"Music player"}),Object(u.jsx)(d,{audioRef:e,progressRef:t,song:R,nextSong:pe,prevSong:function(){var e=F<=0?F+S.length-1:F-1;I(e),M(!1)},handlePlayPause:be,isPaused:T,startSetProgressBar:function(e){G(!0),me(e)},stopSetProgressBar:function(e){G(!1),me(e)},setProgressBar:me,progress:E,addRemoveFromFavourites:he,favourites:oe,currentPlaylist:x,data:h,songs:S,setCurrentSongIndex:I}),Object(u.jsx)(f,{audioRef:e,songs:S,currentSong:R,handleSelectSong:function(t){var a=ue(t,S);a>=0&&(I(a),e.current.play(),W(0),M(!1)),T||(e.current.pause(),M(!0)),a!==F&&(e.current.play(),M(!1))},setIsPaused:M,song:R,addRemoveFavouritesFromList:function(e){var t=ue(e,S),a=S[t];de(a)?fe(a):je(a)},favourites:oe,currentPlaylist:x}),Object(u.jsx)(m,{audioRef:e,handlePlayPause:be,isPaused:T,progressRef:a,progress:D,song:R,className:ne?"fixed-player__show":"fixed-player__hide",addRemoveFromFavourites:he,playFavourites:function(){oe.length>0?(w(oe),I(0),M(!0),_("favourites"),o(!1),W(0),z(0),e.current.currentTime=0):o(!0)},playAll:function(){w(h),I(0),M(!0),_("all"),W(0),z(0),e.current.currentTime=0},currentPlaylist:x,data:h,favourites:oe,popOut:c})]})})},h=(a(18),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function g(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(b,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/music-player",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/music-player","/service-worker.js");h?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):g(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):g(t,e)}))}}()}],[[19,1,2]]]);
//# sourceMappingURL=main.de100b07.chunk.js.map